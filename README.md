# ğŸ“š BookBox: Community-Driven Book Reviews, Reading Lists & Lending

![Ruby on Rails](https://img.shields.io/badge/Rails-7.0-red?logo=rubyonrails)
![PostgreSQL](https://img.shields.io/badge/Database-PostgreSQL-blue?logo=postgresql)
![Cloudinary](https://img.shields.io/badge/Images-Cloudinary-lightgrey?logo=cloudinary)
![Bootstrap](https://img.shields.io/badge/Frontend-Bootstrap_5-purple?logo=bootstrap)

---

## ğŸ‘¥ Team Members
- [Liana Bourdon](mailto:lbourdon@conncoll.com)
- [Annabelle Calvin](mailto:acalvin@conncoll.edu) 
- [Cam Bayusik](mailto:cbayusik@conncoll.edu)

---

## ğŸ¯ Project Description
**BookBox** is a full-featured Rails application where users can:
- ğŸ“– Browse & review books
- ğŸ—‚ï¸ Organize personal reading lists
- ğŸ” Lend books to other users
- ğŸ§  See tasks, mark progress, and share recommendations

With global admin content, personalized lists, and interactive UI features, BookBox delivers a secure, collaborative reading experience.

---

## ğŸ” Authentication & Authorization
- ğŸ” **Devise** for user accounts (sign up, login via email or autogenerated username, password resets, account deletion)
- âœ¨ Users can log in seamlessly with either email or username (autogenerated at sign-up, e.g., `j.doe_12345`)
- âš™ï¸ **Admin & Super-Admin roles**
- ğŸš« Super-admin is protected from deletion or demotion
- âœ… Secure access controls (`before_action`) for task and book ownership
- ğŸ” Forced password reset workflow (e.g., after admin-triggered resets)

---

## ğŸ§© Models & Relationships (7 Total)
- **User** â€“ Auth with roles & relationships
- **Book** â€“ Title, author, genre, Active Storage cover image
- **Genre** â€“ Global, admin-defined taxonomy
- **Review** â€“ One per user/book, with rating and comment
- **TaskCategory** â€“ Global or personal labels, color-coded
- **ReadingTask** â€“ Userâ€™s to-read item with priority, completion, and recommendation
- **Lending** â€“ Tracks active and historical book loans between users

> âœ… All models have strong validations and scoped uniqueness constraints

---

## ğŸ¨ Front-End Design
- ğŸ’  **Bootstrap 5** responsive layout & components
- ğŸ¯ **FontAwesome** icons for all UI interactions
- ğŸ¨ **Custom SCSS** for badges, task colors, and page headers
- ğŸ“š Loaned books grayed out and annotated with borrower info

---

## ğŸ’¾ Assets & JavaScript
- â˜ï¸ **Cloudinary via Active Storage** for hosted cover uploads
- âš¡ **JavaScript Enhancements Implemented**:
  - ğŸ›ï¸ **Select2** with cover thumbnails in dropdowns
  - ğŸ”„ **StimulusJS** for dropdown and toggle interactions
  - ğŸ”• Auto-dismissable flash alerts

---

## ğŸŒ Core Routes (20+)
- `/` â€“ Public landing page
- `/books` â€“ Filterable library (owned, admin, or borrowed)
- `/books/:id` â€“ Book detail + reviews + tasks
- `/genres` â€“ Browse genres
- `/reading_tasks` â€“ Personal task list
- `/reading_tasks/completed` â€“ Completed tasks view
- `/books/:id/reviews` â€“ Leave/edit/delete reviews
- `/reading_tasks/:id/mark_completed` â€“ Mark task done
- `/reading_tasks/:id/recommend` â€“ Toggle recommended flag
- `/lendings/new` â€“ Initiate lending
- `/lendings/:id/return` â€“ Mark a book as returned
- `/admin/users` â€“ Admin user management (promote, reset pw, delete)

---

## ğŸš€ Deployment Target
- ğŸ¯ **PostgreSQL** in production
- â˜ï¸ **Cloudinary** for image hosting (manual config via `storage.yml`)
- ğŸ”§ **Heroku-compatible deployment**
- âš ï¸ *No `.env` file; credentials entered manually or via platform config vars*

---

## âœ… Additional Features
- ğŸ” Lending system with return flow
- ğŸ‘‘ Super-admin shared library
- ğŸ” Forced password change post-reset
- ğŸ—‚ï¸ Custom & global task categories with colors
- â­ Task recommendation toggle
- âš¡ Select2 + Stimulus UI enhancements

---

## ğŸ”— Repository & Demo
- ğŸ“‚ **GitHub**: [https://github.com/lianabourdon/bookbox](https://github.com/lianabourdon/BookBox)
- ğŸŒ **Live App**: [https://bookbox.herokuapp.com](https://bookbox-app-966dbd8f7ec1.herokuapp.com/)
---


---

## ğŸš€ Deployment
* **PostgreSQL** production DB  
* **Cloudinary** image hosting  
* Deployed on **Heroku** (Config Vars for secrets)  

---

## ğŸ› ï¸ Local Install & Run (Puma)

### Prerequisites
| Package | Min version | Install note |
|---------|-------------|--------------|
| Ruby | 3.2 | macOS: `brew install ruby@3.2`<br>Ubuntu: rbenv 3.2.x |
| Bundler | latest | `gem install bundler -N` |
| Node.js | 16 | `brew install node` / `apt install nodejs` |
| Git | any | clone repo |
| Build tools | gcc/clang, make, headers | Linux & Windows-native only |

### Quick-start commands

| Platform | Setup (one-time) | Run (every session) |
|----------|------------------|---------------------|
| **macOS (Homebrew)** | ```bash\n/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"\nbrew install ruby@3.2 node\ngem install rails -N``` | ```bash\ngit clone https://github.com/lianabourdon/bookbox.git\ncd bookbox\nbundle install\nbin/rails s``` |
| **Ubuntu 22.04 / Debian** | ```bash\nsudo apt update && sudo apt install -y build-essential libssl-dev libreadline-dev zlib1g-dev curl git\ncurl -fsSL https://github.com/rbenv/rbenv-installer/raw/main/bin/rbenv-installer | bash\necho 'export PATH=\"$HOME/.rbenv/bin:$PATH\"' >> ~/.bashrc && source ~/.bashrc\nrbenv install 3.2.2 && rbenv global 3.2.2\ncurl -fsSL https://deb.nodesource.com/setup_20.x | sudo -E bash -\nsudo apt install -y nodejs\ngem install rails -N``` | ```bash\ngit clone https://github.com/lianabourdon/bookbox.git\ncd bookbox\nbundle install\nbin/rails s -b 0.0.0.0``` |
| **Windows (WSL 2)** | `wsl --install` â†’ open Ubuntu â†’ follow Linux column | same as Linux |
| **Windows (RubyInstaller)** | Install **RubyInstaller 3.2 x64** + MSYS2 devkit (â€œRidk installâ€ option 3). Install Node LTS. `gem install rails -N`. | ```cmd\ngit clone https://github.com/lianabourdon/bookbox.git\ncd bookbox\nbundle install\nbin\\rails s``` |

When `bin/rails s` runs youâ€™ll see:

Puma starting in single mode...
Listening on http://127.0.0.1:3000



## ğŸ› ï¸ğŸ“– App Functionality
 **Here are every feature present in the codebase** as implemented.

---

### 1Â Â·Â Authentication & User Accounts

| Feature                              | Details                                                                                                                                                                         |
| ------------------------------------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Devise-based signup / login**      | Users register with **first name, last name, email, password**. A unique `username` is auto-generated on create (`firstInitialLastName_randomNumber`) and stored in the DB.     |
| **Role system**                      | `regular` (default), `admin`, and a protected `super_admin`. Roles drive authorisation checks throughout the controllers.                                                       |
| **First-name display**               | The nav-bar *Account* dropdown greets the current user by first name on every page.                                                                                             |
| **Self-service profile**             | Users can update their profile, change password, or **delete their own account**. Deleting cascades to destroy all Reading Tasks, Reviews, Task Categories, and uploaded media. |
| **Password recovery & forced reset** | Standard Devise reset flow + an admin â€œReset Passwordâ€ action that flags the user to change it on next login.                                                                   |

---

### 2Â Â·Â Books (Catalogue)

| Feature               | Details                                                                                                                                                                              |
| --------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **CRUD**              | Authenticated users can **create, view, edit, and delete** their own Book records.                                                                                                   |
| **Cover uploads**     | Books accept an optional JPEG/PNG cover via **Active Storage + Cloudinary** (auto-thumbnailed).                                                                                      |
| **Genre filter**      | Each Book belongs to one fixed **Genre** (e.g., Fantasy, Biography). Browsing `/books` shows pill buttons to filter by genre; query params keep the filter active across pagination. |
| **Select2 Quick-Add** | When adding a Reading Task, a live **Select2 dropdown** lets users search the catalogue (covers + titles) without leaving the form.                                                  |
| **Pagination**        | Large lists are paginated with Kaminari; query parameters preserved for genre/search filters.                                                                                        |

---

### 3Â Â·Â Reading Tasks (â€œTo-Dosâ€)

| Feature            | Details                                                                                                                                                                             |
| ------------------ | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Create task**    | From any Book card or the â€œAdd Taskâ€ page (`/reading_tasks/new`), pick a book, set **priority** (High/Medium/Low) and an optional **Task Category**.                                |
| **Read / update**  | `/reading_tasks` lists current tasks. Inline controls let users change priority, toggle **recommend** flag, move the task to a different Task Category, or open the full edit form. |
| **Mark complete**  | One-click â€œâœ“ Doneâ€ button calls `PATCH /reading_tasks/:id/mark_completed`, moves the task to `/reading_tasks/completed`, and applies a grey-out badge.                              |
| **Delete task**    | Trash-can icon triggers `DELETE /reading_tasks/:id`.                                                                                                                                |
| **Visual cues**    | Priority levels get color-coded Bootstrap badges; completed tasks appear greyed with a strikethrough title.                                                                         |
| **Completed view** | `/reading_tasks/completed` tab lists finished books with date completed and rating shortcut.                                                                                        |

---

### 4Â Â·Â Task Categories (user-defined)

| Feature               | Details                                                                                                              |
| --------------------- | -------------------------------------------------------------------------------------------------------------------- |
| **Full CRUD**         | Users create personal categories (`/task_categories/new`), assign them colours, edit names/colours, and delete them. |
| **Scoped uniqueness** | Category name must be unique per-user; deletion is blocked if tasks are still linked (restrict with error).          |
| **Filtering**         | Task index can be filtered by Task Category via dropdown.                                                            |

---

### 5Â Â·Â Genres (reference data)

| Feature             | Details                                                                                                                                  |
| ------------------- | ---------------------------------------------------------------------------------------------------------------------------------------- |
| **Fixed seed data** | Ten canonical genres are pre-loaded by `db/seeds.rb` (Fantasy â†’ Young Adult). They are **not editable via UI** to avoid orphaning books. |
| **Index & show**    | `/genres` lists all genres; `/genres/:id` shows a genre banner plus its book catalogue.                                                  |

---

### 6Â Â·Â Reviews

| Feature                  | Details                                                                                                                                                              |
| ------------------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **One-per-user**         | Users can leave a **star rating (1-5) and a comment** on any book they have read; uniqueness validation prevents multiple reviews by the same user on the same book. |
| **Edit / delete**        | Inline â€œEditâ€ and â€œDeleteâ€ icons on the Book detail page; actions routed through nested resources `/books/:book_id/reviews`.                                         |
| **Average rating badge** | Each Book card shows a live average rating badge (filled stars + numeric value).                                                                                     |

---

### 7Â Â·Â Lending Library

| Feature                 | Details                                                                                                                                               |
| ----------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------- |
| **Start a loan**        | Owner clicks â€œLendâ€ on a Book card, selects a borrower (auto-complete list of registered users). Creates a `Lending` record with `lent_at` timestamp. |
| **Return workflow**     | Borrower (or owner) clicks â€œReturnâ€ to stamp `returned_at`.                                                                                           |
| **Conflict prevention** | Validation blocks new loans if the book is already on loan (only attempts with `returned_at = nil` are checked).                                      |
| **Visual indicators**   | Loaned books show a â€œğŸ“š Borrowed by <name>â€ ribbon and are disabled from further edits until returned. The book cover is grayed out.            |

---

### 8Â Â·Â Admin Console

| Feature                    | Details                                                                                  |
| -------------------------- | ---------------------------------------------------------------------------------------- |
| **User management**        | `/admin/users` grid: promote/demote admins, reset passwords, delete users.               |
| **Super-admin protection** | Callback prevents super-admin account from being altered or destroyed.                   |
| **System metrics**         | Sidebar shows counts of Books, Tasks, Reviews, and Active Loans for quick health checks. |

---

### 9Â Â·Â Global UX Features

* **Responsive Bootstrap 5.3** layout with dark-mode-friendly palette.
* **Font Awesome 6** icons throughout (actions, ratings, status pills).
* **Turbo + Stimulus** for fast in-place updates (task actions, Select2 searches).
* **Flash messages** with Toast styling for creates/updates/deletes.
* **Accessible keyboard shortcuts** (`?` opens cheatsheet modal).
* **Credits & FAQ pages** explain tech stack and common user questions.

---

### 10Â Â·Â Data Integrity & Cleanup

* **Cascade deletes** ensure no orphan data (e.g., deleting a user removes their tasks, reviews, categories, and cover uploads).
* **Restrict-with-error** on Task Category deletion prevents losing linked tasks.
* **Database-level foreign-keys** on all `belongs_to` associations.

---


## ğŸ‘‹ License & Credits
Created by Liana, Annabelle, and Cam for COM214 â€“ Final Project. All rights reserved.

